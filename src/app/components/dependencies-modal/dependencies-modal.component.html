<h1 mat-dialog-title>Add Calc </h1>
<div mat-dialog-content>
  <mat-form-field>
    <input matInput placeholder="Name" [(ngModel)]="data.data.name">
  </mat-form-field>
  <mat-form-field>
    <mat-select [(value)]="data.data.model" placeholder="Model">
      <mat-option>...</mat-option>
      <mat-option *ngFor="let option of constants.models | keys" value="{{option}}">{{option}}</mat-option>
    </mat-select>
  </mat-form-field>
  <mat-form-field *ngIf="data.data.model">
    <mat-select [(value)]="data.data.section" placeholder="Section">
      <mat-option>...</mat-option>
      <mat-option *ngFor="let option of constants.models[data.data.model] | keys" value="{{option}}">{{option}}</mat-option>
    </mat-select>
  </mat-form-field>
  <mat-form-field *ngIf="data.data.section && data.data.model">
    <mat-select [(value)]="data.data.field" placeholder="Field">
      <mat-option>...</mat-option>
      <mat-option *ngFor="let option of constants.models[data.data.model][data.data.section].fields | keys" value="{{option}}">{{option}}</mat-option>
    </mat-select>
  </mat-form-field>
  <mat-form-field *ngIf="data.data.section && data.data.model && data.data.field">
    <mat-select [(value)]="data.data.operation" placeholder="Operation">
      <mat-option value="+">+</mat-option>
      <mat-option value="-">-</mat-option>
    </mat-select>
  </mat-form-field>
  <section>
    <mat-checkbox [(ngModel)]="data.data.ifChecked">Ifs</mat-checkbox>
  </section>
  <mat-accordion *ngIf="data.data.ifChecked">
    <div class="row" *ngFor="let i of data.data.if ">
      <mat-expansion-panel>
        <mat-expansion-panel-header>
          <mat-panel-title>
            If {{i.model1}} {{i.section1}} {{i.field1}} {{i.compare}} {{i.model2}} {{i.section2}} {{i.field2}} {{i.value}}
          </mat-panel-title>
        </mat-expansion-panel-header>
        <div class="row">
          <mat-form-field>
            <input matInput placeholder="Model 1" [(ngModel)]=i.model1>
          </mat-form-field>
          <mat-form-field>
            <input matInput placeholder="Section 1" [(ngModel)]=i.section1>
          </mat-form-field>
          <mat-form-field>
            <input matInput placeholder="Field 1" [(ngModel)]=i.field1>
          </mat-form-field>
          <mat-form-field>
            <input matInput placeholder="Compare With" [(ngModel)]=i.compare>
          </mat-form-field>
          <mat-form-field>
            <input matInput placeholder="Model 2" [(ngModel)]=i.model2>
          </mat-form-field>
          <mat-form-field>
            <input matInput placeholder="Section 2" [(ngModel)]=i.section2>
          </mat-form-field>
          <mat-form-field>
            <input matInput placeholder="Field 2" [(ngModel)]=i.field2>
          </mat-form-field>
          <mat-form-field>
            <input matInput placeholder="Or Value" [(ngModel)]=i.value>
          </mat-form-field>
        </div>
      </mat-expansion-panel>
    </div>
  </mat-accordion>
</div>
<div mat-dialog-actions>
  <button mat-button (click)="add()">Add</button>
  <button mat-button (click)="cancel()">Cancel</button>
  <button *ngIf="data.data.ifChecked" mat-button (click)="addIf()">Add If</button>
</div>
